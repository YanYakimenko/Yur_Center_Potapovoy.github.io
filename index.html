<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Юридические услуги</title>

    <!-- Подключение Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" type="text/css" href="style.css" />

    <!-- EmailJS SDK -->
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"
    ></script>
  </head>

  <body>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const isMobile = window.matchMedia("(max-width: 767px)").matches;

        if (isMobile) {
          const servicesButton = document.getElementById("dropdownMenuButton");
          const dropdownContainer = servicesButton.closest(".dropdown");
          const mainDropdown = dropdownContainer.querySelector(
            '.dropdown-menu[aria-labelledby="dropdownMenuButton"]'
          );

          servicesButton.removeAttribute("data-bs-toggle");
          servicesButton.addEventListener("click", function (e) {
            e.preventDefault();
            if (mainDropdown.classList.contains("show")) {
              mainDropdown.classList.remove("show");
              mainDropdown
                .querySelectorAll(".dropdown-menu.show")
                .forEach(function (nestedMenu) {
                  nestedMenu.classList.remove("show");
                });
            } else {
              mainDropdown.classList.add("show");
              const nestedToggles =
                mainDropdown.querySelectorAll(".dropdown-toggle");
              nestedToggles.forEach(function (toggle) {
                const nestedMenu = toggle.nextElementSibling;
                if (nestedMenu) nestedMenu.classList.add("show");
              });
            }
          });
        } else {
          // Обработчики для десктопной версии
          const dropDown1 = document.querySelector("#nestedDropdown1");
          const nestedMenu1 = document.querySelector(
            '.dropdown-menu[aria-labelledby="nestedDropdown1"]'
          );

          dropDown1.addEventListener("mouseover", function () {
            nestedMenu1.classList.add("show");
          });
          dropDown1.addEventListener("mouseout", function () {
            nestedMenu1.classList.remove("show");
          });
          dropDown1.addEventListener("click", function () {
            window.location.href = "yurist-po-nasledstvu.html";
          });

          const dropDown2 = document.querySelector("#nestedDropdown2");
          const nestedMenu2 = document.querySelector(
            '.dropdown-menu[aria-labelledby="nestedDropdown2"]'
          );

          dropDown2.addEventListener("mouseover", function () {
            nestedMenu2.classList.add("show");
          });
          dropDown2.addEventListener("mouseout", function () {
            nestedMenu2.classList.remove("show");
          });
          dropDown2.addEventListener("click", function () {
            window.location.href = "nalogovyj-yurist.html";
          });
        }
      });
    </script>

    <!-- Верхняя навигационная панель -->
    <nav class="navbar" style="background-color: #282e3f; z-index: 1000">
      <div class="container">
        <a class="navbar-brand" href="#">
          <img src="img/logo.png" alt="Logo" width="200" />
        </a>
      </div>
    </nav>

    <!-- Основная навигация -->
    <nav
      class="navbar navbar-expand-lg navbar-dark"
      style="background-color: #333a4d; z-index: 3"
    >
      <div class="container">
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav me-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html">ГЛАВНАЯ</a>
            </li>

            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdownMenuButton"
                role="button"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              >
                УСЛУГИ
              </a>

              <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                <!-- Подменю: Юристы по наследству -->
                <li class="dropdown">
                  <a
                    class="dropdown-item dropdown-toggle"
                    href="yurist-po-nasledstvu.html"
                    id="nestedDropdown1"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    Юристы по наследству
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="nestedDropdown1">
                    <li>
                      <a class="dropdown-item" href="yurist-po-nasledstvu.html"
                        >Юрист по наследству</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="Oformlenie-Nasledstva.html"
                        >Оформление наследства</a
                      >
                    </li>
                    <li>
                      <a class="dropdown-item" href="otkaz-ot-nasledstva.html"
                        >Отказ от наследства</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="priznanie-zaveshhaniya-nedejstvitelnym.html"
                        >Признание завещания недействительным</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="oformlenie-nasledstva-posle-smerti-odnogo-iz-suprugov.html"
                        >Наследство после смерти супруга</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="oformlenie-sobstvennosti-posle-vstupleniya-v-nasledstvo.html"
                        >Оформление собственности</a
                      >
                    </li>
                  </ul>
                </li>

                <!-- Подменю: Налоговый юрист -->
                <li class="dropdown">
                  <a
                    class="dropdown-item dropdown-toggle"
                    href="#"
                    id="nestedDropdown2"
                    role="button"
                    data-bs-toggle="dropdown"
                    aria-expanded="false"
                  >
                    Налоговый юрист
                  </a>
                  <ul class="dropdown-menu" aria-labelledby="nestedDropdown2">
                    <li>
                      <a class="dropdown-item" href="nalogovyj-yurist.html"
                        >Налоговый юрист</a
                      >
                    </li>
                    <li>
                      <a
                        class="dropdown-item"
                        href="minimizacziya-nalogovoj-nagruzki-usluga-yurista.html"
                        >Минимизация налогов</a
                      >
                    </li>
                  </ul>
                </li>

                <li>
                  <a
                    class="dropdown-item"
                    href="yurist-po-dtp-s-postradavshimi.html"
                  >
                    Юрист по ДТП с пострадавшими
                  </a>
                </li>
                <li>
                  <a
                    class="dropdown-item"
                    href="osparivanie-mezhevaniya-spory-po-graniczam-uchastkov.html"
                  >
                    Споры по границам участков
                  </a>
                </li>
              </ul>
            </li>

            <li class="nav-item">
              <a class="nav-link" href="contacts.html">КОНТАКТЫ</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Основное содержимое -->
    <div class="container-fluid">
      <iframe
        src="https://yandex.ru/map-widget/v1/?um=constructor%3A9c0dcb42789f18f33572fff926746de30f63b8ad9e8d86cdf214089acc20414a&amp;source=constructor"
        width="100%"
        height="441"
        frameborder="0"
      >
      </iframe>
    </div>

    <!-- Секция контактов -->
    <div class="container">
      <div class="row row-cols-1 row-cols-md-2 ConCard">
        <!-- Форма обратной связи -->
        <div class="col">
          <div class="card">
            <div class="card-body">
              <h3 class="card-title text-uppercase text-center">
                Обратная связь
              </h3>
              <form id="contact-form1">
                <div class="form-group">
                  <input
                    placeholder="Ваше имя"
                    type="name"
                    class="form-control"
                    id="name"
                    name="name"
                    required
                  />
                </div>
                <div class="form-group mt-3">
                  <input
                    placeholder="Ваш номер телефона"
                    type="nomber"
                    class="form-control"
                    id="nomber"
                    name="nomber"
                    required
                  />
                </div>
                <div class="form-group mt-3">
                  <textarea
                    placeholder="Ваш вопрос..."
                    class="form-control"
                    id="message"
                    name="message"
                    rows="4"
                    required
                  ></textarea>
                </div>

                <button type="submit" class="btn2 mt-3">Отправить</button>
              </form>
            </div>
          </div>
        </div>

        <!-- Контактная информация -->
        <div class="col">
          <div class="card">
            <div class="card-body text-center">
              <h3 class="card-title text-uppercase">Контакты для связи</h3>
              <p class="card-text">ул. Шухова, д.14, стр.5, Москва</p>
              <p class="card-text">+7 (903) 132-86-18</p>
              <p class="card-text">+7 (903) 363-77-49</p>
              <p class="card-text">potapova.borisova@yandex.ru</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Модальное окно статуса -->
    <div class="modal fade" id="statusModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="statusModalTitle"></h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" id="statusModalBody"></div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Закрыть
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Инициализация EmailJS
      emailjs.init("xdXtSVt7aFpIctRwE");
      document
        .getElementById("contact-form1")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const modal = new bootstrap.Modal(
            document.getElementById("statusModal")
          );
          const statusTitle = document.getElementById("statusModalTitle");
          const statusBody = document.getElementById("statusModalBody");
          emailjs
            .sendForm("service_mf77bel", "template_mn89k9k", this)
            .then(() => {
              // Успешная отправка
              this.reset();
              statusTitle.textContent = "Успешно!";
              statusBody.textContent = "Сообщение успешно отправлено!";
              statusModal.classList.remove("modal-error");
              statusModal.classList.add("modal-success");
              modal.show();
            })
            .catch((error) => {
              // Ошибка
              statusTitle.textContent = "Ошибка!";
              statusBody.textContent = `Произошла ошибка: ${error.text}`;
              statusModal.classList.remove("modal-success");
              statusModal.classList.add("modal-error");
              modal.show();
            });
        });
    </script>

    <!-- Стили модальных окон -->
    <style>
      .modal-success .modal-header {
        background: #28a745;
        color: white;
      }
      .modal-error .modal-header {
        background: #dc3545;
        color: white;
      }
      #contact-form {
        max-width: 500px;
        margin: 2rem auto;
        padding: 2rem;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .modal-content {
        color: black;
        justify-content: center;
      }
    </style>

    <!-- Подключение Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
  </body>
</html>
